
ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
³														³
³														³
³														³

		ÚÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
		ÃÄÄÄÄ
		³   a   r   G   r   a   y
		
		
		Port de fargray pour TI 68k HW2 par Julien MONVILLE a.k.a. Penpen.
					 ____________________
					( asm_dev@voonoo.net )
					 îîîîîîîîîîîîîîîîîîîî
		
		
		Toutes les images devraient maintenant s'afficher correctement … l'‚cran,
		y compris les anciennes.
		
		Le bug, c'‚tait juste que fargray utilisait LCD_MEM pour un des plans...
		Pour corriger ‡a, j'ai juste fait en sorte que fargray utilise les plans
		graphlib::plane0, graphlib::plane1 et graphlib::plane2 en interne, sans
		tenir compte des arguments qu'on lui passe pour l'adresse des plans.. :)
		
		
		
		Ainsi, il suffira maintement d'‚crire ceci pour aficher une image :
		
		;***************************************************************
		;*******   ASM generated by The	FarGray	Converter v0.2.4  ******
		;*******       ( ou‚ enfin plus tellement #sick# )        ******
		;***************************************************************
		
		     include	"tios.h"
		     include	"graphlib.h"			;plus la peine d'utiliser gray7lib..
		     include	"fargray.h"
		     include	"userlib.h"			;..ni util d'ailleurs :)
		
		     xdef	_main
		     xdef	_ti89
		     
		_main:
			jsr     graphlib::clr_scr
			jsr     graphlib::gray7			; Turn on 7-grayscale
			lea     planes(pc),a5			; Set pointer to compressed data !
			move.w  #xxxx,d7			; Number of bytes to paint.
			jsr     fargray::put3planepic		; Put Picture on Screen !
			jsr     userlib::idle_loop		; Wait until keypressed.
			jsr     graphlib::gray2			; Turn off Grayscale
			rts
		
		;****************************************************************
		
		planes:	INCBIN	"xxxx.bin"
		
			END
		
		;******************** End of Fargo program **********************
		
		
		
		
		
		
		Mais comme je l'ai dit plus haut, les anciennes images de ce style
		fonctionneront ‚galement :
		
		;***************************************************************
		;*******   ASM generated by The FarGray Converter  v0.2.4 ******
		;***************************************************************
		
		     include   "tios.h"
		     include   "util.h"
		     include   "fargray.h"
		     include   "gray7lib.h"
		
		     xdef _main
		     xdef _comment
		
		      _main:
		             jsr     util::clr_scr
		             clr.w   -(a7)
		             jsr     tios::ST_busy
		             addq.w  #2,a7
		
		             jsr     gray7lib::on            ; Turn on 7-grayscale
		             move.l  gray7lib::plane0,a1     ; Remember plane
		             move.l  gray7lib::plane1,a2     ; Remember plane
		             lea     planes(pc),a5           ; Set pointer to compressed data !
		             move.w  #xxxx,d7                ; Number of bytes to paint.
		             jsr     fargray::put3planepic   ; Put Picture on Screen !
		
		             jsr     flib::idle_loop         ; Wait until keypressed.
		             jsr     gray7lib::off           ; Turn off Grayscale
		             rts
		;****************************************************************
		
		  planes:
		     	INCBIN	"xxxx.bin"
		
		  credit:
		        dc.b "Converted using FarGray v0.2.4 by JKKN 1/97, 5/98",0
		
		_comment:
		        dc.b "No description (FG v0.2.4)",0
		
		   end
		   
		;******************** End of Fargo program **********************
		
		
		
		
		
		
		
		Notez que, bien que ce dernier exemple active les gris avec gray7lib, fargray
		qui utilise graphib fonctionnera sans problŠme puisque depuis longtemps, gray7lib
		se contente d'appeler les fonctions de graplib.. :)
		
		
³														³
³														³
³														³
ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÙ